<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>lab2_pyqt &mdash; Lab3_PyQt 00.00.01 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=d7bb8d4d"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Lab3_PyQt
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">lab2_pyqt</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Lab3_PyQt</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">lab2_pyqt</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for lab2_pyqt</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">sqlite3</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="p">(</span><span class="n">QApplication</span><span class="p">,</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QLabel</span><span class="p">,</span> <span class="n">QLineEdit</span><span class="p">,</span> <span class="n">QPushButton</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QComboBox</span><span class="p">,</span><span class="n">QMessageBox</span><span class="p">,</span> <span class="n">QTableWidget</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">,</span> <span class="n">QFileDialog</span><span class="p">,</span> <span class="n">QHeaderView</span><span class="p">,</span> <span class="n">QDialog</span><span class="p">,</span> <span class="n">QGridLayout</span><span class="p">,</span> <span class="n">QHBoxLayout</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QIcon</span>  



<div class="viewcode-block" id="init_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.init_db">[docs]</a>
<span class="k">def</span> <span class="nf">init_db</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the SQLite database by creating necessary tables if they do not already exist.</span>

<span class="sd">    **docstring** </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS students (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            name TEXT NOT NULL,</span>
<span class="s1">            age INTEGER NOT NULL,</span>
<span class="s1">            email TEXT NOT NULL UNIQUE,</span>
<span class="s1">            student_id TEXT NOT NULL UNIQUE</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS instructors (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            name TEXT NOT NULL,</span>
<span class="s1">            age INTEGER NOT NULL,</span>
<span class="s1">            email TEXT NOT NULL UNIQUE,</span>
<span class="s1">            instructor_id TEXT NOT NULL UNIQUE</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS courses (</span>
<span class="s1">            id INTEGER PRIMARY KEY AUTOINCREMENT,</span>
<span class="s1">            course_id TEXT NOT NULL UNIQUE,</span>
<span class="s1">            course_name TEXT NOT NULL,</span>
<span class="s1">            instructor_id INTEGER,</span>
<span class="s1">            FOREIGN KEY (instructor_id) REFERENCES instructors(id)</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        CREATE TABLE IF NOT EXISTS enrollments (</span>
<span class="s1">            student_id INTEGER,</span>
<span class="s1">            course_id INTEGER,</span>
<span class="s1">            FOREIGN KEY (student_id) REFERENCES students(id),</span>
<span class="s1">            FOREIGN KEY (course_id) REFERENCES courses(id)</span>
<span class="s1">        )</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="add_student_to_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.add_student_to_db">[docs]</a>
<span class="k">def</span> <span class="nf">add_student_to_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds a new student to the database.</span>

<span class="sd">    **Sphinx-style documentation**</span>

<span class="sd">    :param name: The student&#39;s full name.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param age: The student&#39;s age, must be a positive integer.</span>
<span class="sd">    :type age: int</span>
<span class="sd">    :param email: The student&#39;s email address.</span>
<span class="sd">    :type email: str</span>
<span class="sd">    :param student_id: A unique identifier for the student.</span>
<span class="sd">    :type student_id: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the student ID or email is already in use.</span>
<span class="sd">    :return: True if the student is added successfully, False if there&#39;s an IntegrityError.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            INSERT INTO students (name, age, email, student_id)</span>
<span class="s1">            VALUES (?, ?, ?, ?)</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="add_instructor_to_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.add_instructor_to_db">[docs]</a>
<span class="k">def</span> <span class="nf">add_instructor_to_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Sphinx-style documentation**</span>
<span class="sd">    Adds a new instructor to the database.</span>

<span class="sd">    :param name: The instructor&#39;s full name.</span>
<span class="sd">    :type name: str</span>
<span class="sd">    :param age: The instructor&#39;s age, must be a positive integer.</span>
<span class="sd">    :type age: int</span>
<span class="sd">    :param email: The instructor&#39;s email address.</span>
<span class="sd">    :type email: str</span>
<span class="sd">    :param instructor_id: A unique identifier for the instructor.</span>
<span class="sd">    :type instructor_id: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the instructor ID or email is already in use.</span>
<span class="sd">    :return: True if the instructor is added successfully, False if there&#39;s an IntegrityError.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            INSERT INTO instructors (name, age, email, instructor_id)</span>
<span class="s1">            VALUES (?, ?, ?, ?)</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="add_course_to_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.add_course_to_db">[docs]</a>
<span class="k">def</span> <span class="nf">add_course_to_db</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Sphinx-style documentation**</span>
<span class="sd">    Adds a new course to the database.</span>

<span class="sd">    :param course_id: The unique ID for the course.</span>
<span class="sd">    :type course_id: str</span>
<span class="sd">    :param course_name: The name of the course.</span>
<span class="sd">    :type course_name: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the course ID already exists.</span>
<span class="sd">    :return: True if the course is added successfully, False if there&#39;s an IntegrityError.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            INSERT INTO courses (course_id, course_name)</span>
<span class="s1">            VALUES (?, ?)</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="fetch_all_students">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.fetch_all_students">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_all_students</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches all students from the database.</span>

<span class="sd">    **Sphinx-style documentation** </span>

<span class="sd">    :return: A list of student records, where each record contains:</span>
<span class="sd">        - ID (int)</span>
<span class="sd">        - Name (str)</span>
<span class="sd">        - Age (int)</span>
<span class="sd">        - Email (str)</span>
<span class="sd">        - Student ID (str)</span>
<span class="sd">    :rtype: list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM students&#39;</span><span class="p">)</span>
    <span class="n">students</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">students</span></div>


<div class="viewcode-block" id="update_student_in_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.update_student_in_db">[docs]</a>
<span class="k">def</span> <span class="nf">update_student_in_db</span><span class="p">(</span><span class="n">old_student_id</span><span class="p">,</span> <span class="n">new_student_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **Sphinx-style documentation** </span>
<span class="sd">    Updates an existing student&#39;s details in the database, including the ID.</span>

<span class="sd">    :param old_student_id: The current student ID.</span>
<span class="sd">    :type old_student_id: str</span>
<span class="sd">    :param new_student_id: The updated student ID.</span>
<span class="sd">    :type new_student_id: str</span>
<span class="sd">    :param new_name: The updated student name.</span>
<span class="sd">    :type new_name: str</span>
<span class="sd">    :param new_age: The updated student age.</span>
<span class="sd">    :type new_age: int</span>
<span class="sd">    :param new_email: The updated student email address.</span>
<span class="sd">    :type new_email: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the new student ID or email is not unique.</span>
<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            UPDATE students</span>
<span class="s1">            SET student_id=?, name=?, age=?, email=?</span>
<span class="s1">            WHERE student_id=?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">new_student_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span><span class="p">,</span> <span class="n">old_student_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="delete_student_from_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.delete_student_from_db">[docs]</a>
<span class="k">def</span> <span class="nf">delete_student_from_db</span><span class="p">(</span><span class="n">student_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Deletes a student from the database using the provided student ID.</span>

<span class="sd">     **regular docstring** </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM students WHERE student_id=?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,))</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>



<div class="viewcode-block" id="update_instructor_in_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.update_instructor_in_db">[docs]</a>
<span class="k">def</span> <span class="nf">update_instructor_in_db</span><span class="p">(</span><span class="n">old_instructor_id</span><span class="p">,</span> <span class="n">new_instructor_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates an existing instructor&#39;s details in the database, including the ID.</span>

<span class="sd">    **Sphinx-style documentation** </span>
<span class="sd">    :param old_instructor_id: The current instructor ID.</span>
<span class="sd">    :type old_instructor_id: str</span>
<span class="sd">    :param new_instructor_id: The updated instructor ID.</span>
<span class="sd">    :type new_instructor_id: str</span>
<span class="sd">    :param new_name: The updated instructor name.</span>
<span class="sd">    :type new_name: str</span>
<span class="sd">    :param new_age: The updated instructor age.</span>
<span class="sd">    :type new_age: int</span>
<span class="sd">    :param new_email: The updated instructor email address.</span>
<span class="sd">    :type new_email: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the new instructor ID or email is not unique.</span>
<span class="sd">    :return: None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            UPDATE instructors</span>
<span class="s1">            SET instructor_id=?, name=?, age=?, email=?</span>
<span class="s1">            WHERE instructor_id=?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">new_instructor_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span><span class="p">,</span> <span class="n">old_instructor_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Update failed: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="fetch_all_instructors">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.fetch_all_instructors">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_all_instructors</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches all instructors from the database.</span>

<span class="sd">    **Sphinx-style documentation** </span>

<span class="sd">    :return: A list of instructor records, where each record contains:</span>
<span class="sd">        - ID (int)</span>
<span class="sd">        - Name (str)</span>
<span class="sd">        - Age (int)</span>
<span class="sd">        - Email (str)</span>
<span class="sd">        - Instructor ID (str)</span>
<span class="sd">    :rtype: list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM instructors&#39;</span><span class="p">)</span>
    <span class="n">instructors</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">instructors</span></div>



<div class="viewcode-block" id="delete_instructor_from_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.delete_instructor_from_db">[docs]</a>
<span class="k">def</span> <span class="nf">delete_instructor_from_db</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **docsting documentation**</span>
<span class="sd">    Deletes an instructor from the database based on the provided instructor ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM instructors WHERE instructor_id=?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_id</span><span class="p">,))</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>




<div class="viewcode-block" id="update_course_in_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.update_course_in_db">[docs]</a>
<span class="k">def</span> <span class="nf">update_course_in_db</span><span class="p">(</span><span class="n">old_course_id</span><span class="p">,</span> <span class="n">new_course_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the course&#39;s details in the database, including the course ID.</span>

<span class="sd">    **Sphinx-style documentation**</span>

<span class="sd">    :param old_course_id: The current course ID.</span>
<span class="sd">    :type old_course_id: str</span>
<span class="sd">    :param new_course_id: The updated course ID.</span>
<span class="sd">    :type new_course_id: str</span>
<span class="sd">    :param new_name: The updated course name.</span>
<span class="sd">    :type new_name: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the new course ID already exists in the database.</span>
<span class="sd">    :return: True if the update was successful, False if there was an IntegrityError.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            UPDATE courses</span>
<span class="s1">            SET course_id=?, course_name=?</span>
<span class="s1">            WHERE course_id=?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">new_course_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">old_course_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>




<div class="viewcode-block" id="fetch_all_courses">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.fetch_all_courses">[docs]</a>
<span class="k">def</span> <span class="nf">fetch_all_courses</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetches all courses from the database.</span>

<span class="sd">    **Sphinx-style documentation**</span>

<span class="sd">    :return: A list of course records, where each record contains:</span>
<span class="sd">        - ID (int)</span>
<span class="sd">        - Course ID (str)</span>
<span class="sd">        - Course Name (str)</span>
<span class="sd">        - Instructor ID (int, nullable)</span>
<span class="sd">    :rtype: list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM courses&#39;</span><span class="p">)</span>
    <span class="n">courses</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">courses</span></div>



<div class="viewcode-block" id="delete_course_from_db">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.delete_course_from_db">[docs]</a>
<span class="k">def</span> <span class="nf">delete_course_from_db</span><span class="p">(</span><span class="n">course_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **docstring documentation**</span>
<span class="sd">    Deletes a course from the database using the provided course ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;DELETE FROM courses WHERE course_id=?&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">course_id</span><span class="p">,))</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="assign_instructor_to_course">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.assign_instructor_to_course">[docs]</a>
<span class="k">def</span> <span class="nf">assign_instructor_to_course</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Assigns an instructor to a course.</span>

<span class="sd">     **Sphinx-style documentation**</span>

<span class="sd">    :param instructor_id: The unique identifier of the instructor to assign.</span>
<span class="sd">    :type instructor_id: str</span>
<span class="sd">    :param course_id: The unique identifier of the course to which the instructor is assigned.</span>
<span class="sd">    :type course_id: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If there&#39;s an issue with the instructor or course ID.</span>
<span class="sd">    :return: True if the instructor is assigned successfully, False if an IntegrityError occurs.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            UPDATE courses</span>
<span class="s1">            SET instructor_id = (</span>
<span class="s1">                SELECT id FROM instructors WHERE instructor_id=?</span>
<span class="s1">            )</span>
<span class="s1">            WHERE course_id = ?</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="enroll_student_in_course">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.enroll_student_in_course">[docs]</a>
<span class="k">def</span> <span class="nf">enroll_student_in_course</span><span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Enrolls a student in a course by adding a record to the enrollments table.</span>

<span class="sd">    **Sphinx-style documentation** </span>

<span class="sd">    :param student_id: The unique identifier of the student to enroll.</span>
<span class="sd">    :type student_id: str</span>
<span class="sd">    :param course_id: The unique identifier of the course.</span>
<span class="sd">    :type course_id: str</span>
<span class="sd">    :raises sqlite3.IntegrityError: If the student is already enrolled in the course.</span>
<span class="sd">    :return: True if the student was successfully enrolled, False otherwise.</span>
<span class="sd">    :rtype: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">            INSERT INTO enrollments (student_id, course_id)</span>
<span class="s1">            VALUES (</span>
<span class="s1">                (SELECT id FROM students WHERE student_id=?),</span>
<span class="s1">                (SELECT id FROM courses WHERE course_id=?)</span>
<span class="s1">            )</span>
<span class="s1">        &#39;&#39;&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">))</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">IntegrityError</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="kc">True</span></div>


<div class="viewcode-block" id="is_valid_email">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.is_valid_email">[docs]</a>
<span class="k">def</span> <span class="nf">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **docstring**</span>
<span class="sd">    Validates if the given email is in the correct format </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;^[\w\.-]+@[\w\.-]+\.\w+$&#39;</span><span class="p">,</span> <span class="n">email</span><span class="p">)</span></div>


<div class="viewcode-block" id="is_valid_age">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.is_valid_age">[docs]</a>
<span class="k">def</span> <span class="nf">is_valid_age</span><span class="p">(</span><span class="n">age</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    **docstring**</span>
<span class="sd">    Validates if the given age is a positive integer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">age</span><span class="o">.</span><span class="n">isdigit</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span></div>


<div class="viewcode-block" id="save_data_to_json">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.save_data_to_json">[docs]</a>
<span class="k">def</span> <span class="nf">save_data_to_json</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Saves all data (students, instructors, and courses) into a JSON file.</span>

<span class="sd">    **Docstring**</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;students&#39;</span><span class="p">:</span> <span class="n">fetch_all_students</span><span class="p">(),</span>
        <span class="s1">&#39;instructors&#39;</span><span class="p">:</span> <span class="n">fetch_all_instructors</span><span class="p">(),</span>
        <span class="s1">&#39;courses&#39;</span><span class="p">:</span> <span class="n">fetch_all_courses</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Save Data&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON Files (*.json)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Data saved to JSON file.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="load_data_from_json">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.load_data_from_json">[docs]</a>
<span class="k">def</span> <span class="nf">load_data_from_json</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Loads data from a JSON file into the application.</span>
<span class="sd">    **docstring** </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Open Data&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON Files (*.json)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Data loaded from JSON file.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="export_to_csv">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.export_to_csv">[docs]</a>
<span class="k">def</span> <span class="nf">export_to_csv</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Exports student, instructor, and course data into a CSV file.</span>
<span class="sd">    **docsting** </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">students</span> <span class="o">=</span> <span class="n">fetch_all_students</span><span class="p">()</span>
    <span class="n">instructors</span> <span class="o">=</span> <span class="n">fetch_all_instructors</span><span class="p">()</span>
    <span class="n">courses</span> <span class="o">=</span> <span class="n">fetch_all_courses</span><span class="p">()</span>

    <span class="n">path</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Export CSV&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;CSV Files (*.csv)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email/Course ID&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">student</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
            <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
            <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
                <span class="n">instructor_name</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span> <span class="k">if</span> <span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;Instructor ID: </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">([</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;N/A&quot;</span><span class="p">,</span> <span class="n">instructor_name</span><span class="p">])</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Data exported to CSV file.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="backup_database">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.backup_database">[docs]</a>
<span class="k">def</span> <span class="nf">backup_database</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a backup of the database file.</span>

<span class="sd">    **docstring** </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;school.db&#39;</span><span class="p">)</span>
    <span class="n">backup_file</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getSaveFileName</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Backup Database&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;SQLite Database (*.db)&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">backup_file</span><span class="p">:</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">backup_file</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">conn</span><span class="o">.</span><span class="n">iterdump</span><span class="p">():</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">line</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span>
        <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Backup&quot;</span><span class="p">,</span> <span class="s2">&quot;Database backup successful.&quot;</span><span class="p">)</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem">[docs]</a>
<span class="k">class</span> <span class="nc">SchoolManagementSystem</span><span class="p">(</span><span class="n">QWidget</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main window for the School Management System application.</span>

<span class="sd">    - Defines the GUI for adding students, instructors, and courses.</span>
<span class="sd">    - Allows managing registrations and assignments.</span>

<span class="sd">    **docstring** </span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the SchoolManagementSystem application.</span>

<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUI</span><span class="p">()</span>

<div class="viewcode-block" id="SchoolManagementSystem.initUI">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.initUI">[docs]</a>
    <span class="k">def</span> <span class="nf">initUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets up the layout and UI components for the main window of the application.</span>

<span class="sd">        This method creates input fields for adding students, instructors, and courses, configures buttons for the fucntions (like registering students, assigning instructors), </span>
<span class="sd">        and sets up the layout for navigating the application&#39;s features.</span>

<span class="sd">        Components:</span>
<span class="sd">        - Input fields for students (name, age, email, ID)</span>
<span class="sd">        - Buttons for adding students, instructors, and courses</span>
<span class="sd">        - Input fields for instructors (name, age, email, ID)</span>
<span class="sd">        - Buttons for registering students and assigning instructors</span>
<span class="sd">        - Input fields for courses (course name, course ID)</span>
<span class="sd">        - Buttons for exporting data, saving data, loading data, and backing up the database</span>
<span class="sd">        - Dropdown menus for student and course selection</span>
<span class="sd">        - A table widget to display the list of students, instructors, and courses.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s2">&quot;School Management System&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>

        <span class="n">main_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Student&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter student name&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter student age&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter student email&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter student ID&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_student_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Student&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_student_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_student</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_student_btn</span><span class="p">)</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Instructor&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter instructor name&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter instructor age&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter instructor email&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter instructor ID&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_instructor_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Instructor&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_instructor_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_instructor</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_instructor_btn</span><span class="p">)</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Add Course&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter course name&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Enter course ID&quot;</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_course_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Add Course&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_course_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_course</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_course_btn</span><span class="p">)</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Register Student for Course&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">register_student_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Register Student&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_student_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_student</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">register_student_btn</span><span class="p">)</span>

        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Assign Instructor to Course&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Assign Instructor&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">assign_instructor_btn</span><span class="p">)</span>

        <span class="n">search_layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Search:&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_input</span><span class="o">.</span><span class="n">setPlaceholderText</span><span class="p">(</span><span class="s2">&quot;Search by name, ID, or course&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">search_input</span><span class="o">.</span><span class="n">textChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_records</span><span class="p">)</span>
        <span class="n">search_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">search_input</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">search_layout</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span> <span class="o">=</span> <span class="n">QTableWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setColumnCount</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setHorizontalHeaderLabels</span><span class="p">([</span><span class="s2">&quot;Name&quot;</span><span class="p">,</span> <span class="s2">&quot;ID&quot;</span><span class="p">,</span> <span class="s2">&quot;Age&quot;</span><span class="p">,</span> <span class="s2">&quot;Email&quot;</span><span class="p">,</span> <span class="s2">&quot;Type&quot;</span><span class="p">,</span> <span class="s2">&quot;Edit&quot;</span><span class="p">,</span> <span class="s2">&quot;Delete&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">horizontalHeader</span><span class="p">()</span><span class="o">.</span><span class="n">setSectionResizeMode</span><span class="p">(</span><span class="n">QHeaderView</span><span class="o">.</span><span class="n">Stretch</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">export_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Export to CSV&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">export_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">export_to_csv</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">export_btn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save_data_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Save Data&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_data_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">save_data_to_json</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_data_btn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Load Data&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load_data_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">load_data_from_json</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">load_data_btn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">backup_btn</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Backup Database&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backup_btn</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">backup_database</span><span class="p">)</span>
        <span class="n">main_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">backup_btn</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">main_layout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.update_dropdowns">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.update_dropdowns">[docs]</a>
    <span class="k">def</span> <span class="nf">update_dropdowns</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the student, instructor, and course dropdown menus with the latest data from the database.</span>
<span class="sd">        **docstring** </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Select Course&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Select Course&quot;</span><span class="p">)</span>

        <span class="n">courses</span> <span class="o">=</span> <span class="n">fetch_all_courses</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Select Student&quot;</span><span class="p">)</span>
        <span class="n">students</span> <span class="o">=</span> <span class="n">fetch_all_students</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="s2">&quot;Select Instructor&quot;</span><span class="p">)</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="n">fetch_all_instructors</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.add_student">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.add_student">[docs]</a>
    <span class="k">def</span> <span class="nf">add_student</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a new student to the database.</span>

<span class="sd">        **Sphinx-style documentation**</span>

<span class="sd">        :param name: The student&#39;s full name.</span>
<span class="sd">        :type name: str</span>
<span class="sd">        :param age: The student&#39;s age, must be a positive integer.</span>
<span class="sd">        :type age: int</span>
<span class="sd">        :param email: The student&#39;s email address.</span>
<span class="sd">        :type email: str</span>
<span class="sd">        :param student_id: A unique identifier for the student.</span>
<span class="sd">        :type student_id: str</span>

<span class="sd">        :raises sqlite3.IntegrityError: If the student ID or email is already in use.</span>

<span class="sd">        :return: True if the student is added successfully, False if there&#39;s an IntegrityError.</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">student_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">student_id</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please fill all student fields correctly.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">add_student_to_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">),</span> <span class="n">email</span><span class="p">,</span> <span class="n">student_id</span><span class="p">):</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Student </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> added successfully!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_age_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_email_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">student_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not add student. Email or Student ID may already be in use.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.add_instructor">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.add_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">add_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds an instructor using the input data provided in the GUI.</span>

<span class="sd">        This method retrieves input data for the instructor (name, age, email, and instructor ID), validates it, and adds the instructor to the database if the data is valid.</span>
<span class="sd">        It also updates the dropdowns and table view after successfully adding the instructor.</span>

<span class="sd">        If the input fields are invalid, it shows a warning message to the user.</span>

<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">email</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">instructor_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_age</span><span class="p">(</span><span class="n">age</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="n">email</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">instructor_id</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please fill all instructor fields correctly.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">add_instructor_to_db</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">age</span><span class="p">),</span> <span class="n">email</span><span class="p">,</span> <span class="n">instructor_id</span><span class="p">):</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Instructor </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> added successfully!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_age_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_email_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">instructor_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not add instructor. Email or Instructor ID may already be in use.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.add_course">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.add_course">[docs]</a>
    <span class="k">def</span> <span class="nf">add_course</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds a course using the input data provided in the GUI.</span>

<span class="sd">        This method retrieves input data for the course (course name and course ID),validates them to ensure both fields are filled, and then adds the course to the database if the data is valid.</span>

<span class="sd">        If the input fields are invalid (e.g., missing course name or ID), it displaysa warning message to the user.</span>

<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">course_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">course_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">course_name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">course_id</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please fill all course fields correctly.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">add_course_to_db</span><span class="p">(</span><span class="n">course_id</span><span class="p">,</span> <span class="n">course_name</span><span class="p">):</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Course </span><span class="si">{</span><span class="n">course_name</span><span class="si">}</span><span class="s2"> added successfully!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not add course. Course ID may already be in use.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.register_student">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.register_student">[docs]</a>
    <span class="k">def</span> <span class="nf">register_student</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Registers a selected student for a selected course.</span>

<span class="sd">        This method retrieves the selected student and course from the dropdown menus,validates that both have been selected, and enrolls the student in the selected course.</span>
<span class="sd">        If no student or course is selected, it shows a warning message to the user.</span>

<span class="sd">        Updates the table view after a successful registration.</span>
<span class="sd">        </span>
<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_student</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">student_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">selected_course</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selected_student</span> <span class="o">==</span> <span class="s2">&quot;Select Student&quot;</span> <span class="ow">or</span> <span class="n">selected_course</span> <span class="o">==</span> <span class="s2">&quot;Select Course&quot;</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please select both a student and a course.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">student_id</span> <span class="o">=</span> <span class="n">selected_student</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">course_id</span> <span class="o">=</span> <span class="n">selected_course</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">enroll_student_in_course</span><span class="p">(</span><span class="n">student_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">):</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Student </span><span class="si">{</span><span class="n">selected_student</span><span class="si">}</span><span class="s2"> registered for </span><span class="si">{</span><span class="n">selected_course</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not register student. They might already be enrolled in this course.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.assign_instructor">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.assign_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">assign_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assigns an instructor to a selected course.</span>

<span class="sd">        This method retrieves the selected instructor and course from the dropdown menus, validates that both have been selected, and assigns the instructor to the course.</span>
<span class="sd">        If no instructor or course is selected, it shows a warning message to the user.</span>

<span class="sd">        Updates the table view after successfully assigning the instructor.</span>

<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_instructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instructor_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">selected_course</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_assign_dropdown</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">selected_instructor</span> <span class="o">==</span> <span class="s2">&quot;Select Instructor&quot;</span> <span class="ow">or</span> <span class="n">selected_course</span> <span class="o">==</span> <span class="s2">&quot;Select Course&quot;</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please select both an instructor and a course.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">instructor_id</span> <span class="o">=</span> <span class="n">selected_instructor</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">course_id</span> <span class="o">=</span> <span class="n">selected_course</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">assign_instructor_to_course</span><span class="p">(</span><span class="n">instructor_id</span><span class="p">,</span> <span class="n">course_id</span><span class="p">):</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Instructor </span><span class="si">{</span><span class="n">selected_instructor</span><span class="si">}</span><span class="s2"> assigned to </span><span class="si">{</span><span class="n">selected_course</span><span class="si">}</span><span class="s2">!&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not assign instructor. Please check the selected IDs.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.display_all_records">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.display_all_records">[docs]</a>
    <span class="k">def</span> <span class="nf">display_all_records</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Displays all student, instructor, and course records in the table widget.</span>

<span class="sd">        This method retrieves data from the database for students, instructors, and courses, and populates the table widget with the retrieved data. </span>
<span class="sd">        It also adds options to edit and delete each record, updating the UI to reflect the current state of the database.</span>

<span class="sd">        The table displays the following:</span>
<span class="sd">        - Student records with name, ID, age, email, and options for editing/deleting.</span>
<span class="sd">        - Instructor records with name, ID, age, email, and options for editing/deleting.</span>
<span class="sd">        - Course records with course name, course ID, assigned instructor, and options for editing/deleting.</span>

<span class="sd">        **docstring**</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">students</span> <span class="o">=</span> <span class="n">fetch_all_students</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">))</span>

        <span class="n">instructors</span> <span class="o">=</span> <span class="n">fetch_all_instructors</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">))</span>

        <span class="n">courses</span> <span class="o">=</span> <span class="n">fetch_all_courses</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;N/A&quot;</span><span class="p">))</span>  
            <span class="n">instructor_name</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span> <span class="k">if</span> <span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;Instructor ID: </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor_name</span><span class="p">))</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">))</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">))</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.create_edit_button">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.create_edit_button">[docs]</a>
    <span class="k">def</span> <span class="nf">create_edit_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Creates an edit button for a wow in the table, allowing editing of records</span>
<span class="sd">        :param record_type: it specifies thr type of the record (Student, Instructor, or Course)</span>
<span class="sd">        :type record_type: str</span>
<span class="sd">        :param record: The record details to be edited.</span>
<span class="sd">        :type record: tuple</span>
<span class="sd">        :return: A QPushButton widget for editing the record.</span>
<span class="sd">        :rtype: QPushButton</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">edit_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Edit&quot;</span><span class="p">)</span>
        <span class="n">edit_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_record</span><span class="p">(</span><span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">edit_button</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.create_delete_button">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.create_delete_button">[docs]</a>
    <span class="k">def</span> <span class="nf">create_delete_button</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Creates a delete button for a table row, allowing deletion of records.</span>

<span class="sd">        :param record_type: Type of the record (Student, Instructor, or Course).</span>
<span class="sd">        :type record_type: str</span>
<span class="sd">        :param record: The record details to be deleted.</span>
<span class="sd">        :type record: tuple</span>
<span class="sd">        :return: A QPushButton widget for deleting the record.</span>
<span class="sd">        :rtype: QPushButton</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">delete_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Delete&quot;</span><span class="p">)</span>
        <span class="n">delete_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">delete_record</span><span class="p">(</span><span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">delete_button</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.edit_record">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.edit_record">[docs]</a>
    <span class="k">def</span> <span class="nf">edit_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Opens an edit dialog based on the record type.</span>

<span class="sd">        :param record_type: Type of the record (Student, Instructor, or Course).</span>
<span class="sd">        :type record_type: str</span>
<span class="sd">        :param record: The record details to be edited.</span>
<span class="sd">        :type record: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Student&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_student</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_instructor</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Course&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_course</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.delete_record">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.delete_record">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Deletes a record based on its type and updates the table.</span>

<span class="sd">        :param record_type: Type of the record (Student, Instructor, or Course).</span>
<span class="sd">        :type record_type: str</span>
<span class="sd">        :param record: The record details to be deleted.</span>
<span class="sd">        :type record: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Student&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_student</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_instructor</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Course&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">delete_course</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.edit_student">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.edit_student">[docs]</a>
    <span class="k">def</span> <span class="nf">edit_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Opens the edit dialog for a student and updates the database after validation</span>

<span class="sd">        :param student: The student record to edit.</span>
<span class="sd">        :type student: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">EditDialog</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="n">new_student_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_age</span><span class="p">(</span><span class="n">new_age</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="n">new_email</span><span class="p">):</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please provide valid data.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">update_student_in_db</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">new_student_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_age</span><span class="p">),</span> <span class="n">new_email</span><span class="p">)</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student updated successfully.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.delete_student">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.delete_student">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_student</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">student</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Deletes the student record from the database after confirmation.</span>

<span class="sd">        :param student: The student record to delete.</span>
<span class="sd">        :type student: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Confirm Delete&#39;</span><span class="p">,</span>
                                     <span class="sa">f</span><span class="s2">&quot;Are you sure you want to delete student </span><span class="si">{</span><span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                                     <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">delete_student_from_db</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Student deleted successfully.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.edit_instructor">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.edit_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">edit_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Opens the edit dialog for an instructor and updates the database.</span>

<span class="sd">        :param instructor: The instructor record to edit.</span>
<span class="sd">        :type instructor: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">EditDialog</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="n">new_instructor_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="n">new_age</span><span class="p">,</span> <span class="n">new_email</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_inputs</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_age</span><span class="p">(</span><span class="n">new_age</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">is_valid_email</span><span class="p">(</span><span class="n">new_email</span><span class="p">):</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please provide valid data.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="n">update_instructor_in_db</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">new_instructor_id</span><span class="p">,</span> <span class="n">new_name</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">new_age</span><span class="p">),</span> <span class="n">new_email</span><span class="p">)</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor updated successfully.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.delete_instructor">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.delete_instructor">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_instructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instructor</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Deletes the instructor record from the database after user confirmation.</span>

<span class="sd">        :param instructor: The instructor record to delete.</span>
<span class="sd">        :type instructor: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Confirm Delete&#39;</span><span class="p">,</span>
                                     <span class="sa">f</span><span class="s2">&quot;Are you sure you want to delete instructor </span><span class="si">{</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                                     <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">delete_instructor_from_db</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor deleted successfully.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.edit_course">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.edit_course">[docs]</a>
    <span class="k">def</span> <span class="nf">edit_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation**</span>
<span class="sd">        Opens the edit dialog for a course and updates the database.</span>

<span class="sd">        :param course: The course record to edit.</span>
<span class="sd">        :type course: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dialog</span> <span class="o">=</span> <span class="n">EditDialog</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dialog</span><span class="o">.</span><span class="n">exec_</span><span class="p">():</span>
            <span class="n">new_course_id</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_course_id</span><span class="p">()</span>  <span class="c1"># Get new course ID</span>
            <span class="n">new_course_name</span> <span class="o">=</span> <span class="n">dialog</span><span class="o">.</span><span class="n">get_course_name</span><span class="p">()</span>  <span class="c1"># Get new course name</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">new_course_name</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">new_course_id</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Input Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Please provide valid course data.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            
            <span class="k">if</span> <span class="n">update_course_in_db</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">new_course_id</span><span class="p">,</span> <span class="n">new_course_name</span><span class="p">):</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Course updated successfully.&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">QMessageBox</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Error&quot;</span><span class="p">,</span> <span class="s2">&quot;Could not update course. Course ID may already be in use.&quot;</span><span class="p">)</span></div>



<div class="viewcode-block" id="SchoolManagementSystem.delete_course">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.delete_course">[docs]</a>
    <span class="k">def</span> <span class="nf">delete_course</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">course</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation** </span>
<span class="sd">        Deletes the course record from the database after user confirmation.</span>

<span class="sd">        :param course: The course record to delete.</span>
<span class="sd">        :type course: tuple</span>
<span class="sd">        :return: None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">reply</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">question</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;Confirm Delete&#39;</span><span class="p">,</span>
                                     <span class="sa">f</span><span class="s2">&quot;Are you sure you want to delete course </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="si">}</span><span class="s2">?&quot;</span><span class="p">,</span>
                                     <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">,</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">reply</span> <span class="o">==</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
            <span class="n">delete_course_from_db</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">QMessageBox</span><span class="o">.</span><span class="n">information</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Success&quot;</span><span class="p">,</span> <span class="s2">&quot;Course deleted successfully.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_dropdowns</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_all_records</span><span class="p">()</span></div>


<div class="viewcode-block" id="SchoolManagementSystem.search_records">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.SchoolManagementSystem.search_records">[docs]</a>
    <span class="k">def</span> <span class="nf">search_records</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **docstring**</span>
<span class="sd">        Searches for students, instructors, or courses based on the input query.</span>

<span class="sd">        Compares the query with student names, student IDs, instructor names, instructor IDs, and course names to filter and display matching records in the table widget.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">search_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setRowCount</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

        <span class="n">students</span> <span class="o">=</span> <span class="n">fetch_all_students</span><span class="p">()</span>
        <span class="n">instructors</span> <span class="o">=</span> <span class="n">fetch_all_instructors</span><span class="p">()</span>
        <span class="n">courses</span> <span class="o">=</span> <span class="n">fetch_all_courses</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">student</span> <span class="ow">in</span> <span class="n">students</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">student</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="n">student</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">instructor</span> <span class="ow">in</span> <span class="n">instructors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">4</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">2</span><span class="p">])))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor</span><span class="p">[</span><span class="mi">3</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Instructor&quot;</span><span class="p">,</span> <span class="n">instructor</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">course</span> <span class="ow">in</span> <span class="n">courses</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">or</span> <span class="n">query</span> <span class="ow">in</span> <span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="n">row_position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">insertRow</span><span class="p">(</span><span class="n">row_position</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">course</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;N/A&quot;</span><span class="p">))</span>
                <span class="n">instructor_name</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span> <span class="k">if</span> <span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;Instructor ID: </span><span class="si">{</span><span class="n">course</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="n">instructor_name</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setItem</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">QTableWidgetItem</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_edit_button</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">table_widget</span><span class="o">.</span><span class="n">setCellWidget</span><span class="p">(</span><span class="n">row_position</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_delete_button</span><span class="p">(</span><span class="s2">&quot;Course&quot;</span><span class="p">,</span> <span class="n">course</span><span class="p">))</span></div>
</div>

<div class="viewcode-block" id="EditDialog">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.EditDialog">[docs]</a>
<span class="k">class</span> <span class="nc">EditDialog</span><span class="p">(</span><span class="n">QDialog</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A dialog for editing student, instructor, or course records.</span>

<span class="sd">    This dialog presents input fields for updating student, instructor, or course data.</span>
<span class="sd">    **docsting**</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record_type</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **sphinx**</span>
<span class="sd">        Initializes the edit dialog with the record type and its data.</span>

<span class="sd">        :param record_type: Specifies whether the record is a Student, Instructor, or Course.</span>
<span class="sd">        :type record_type: str</span>
<span class="sd">        :param record: The data of the record being edited.</span>
<span class="sd">        :type record: tuple</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span> <span class="o">=</span> <span class="n">record_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">record</span> <span class="o">=</span> <span class="n">record</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Edit </span><span class="si">{</span><span class="n">record_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QIcon</span><span class="p">())</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">record_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">age_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">email_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">id_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">age_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">email_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;ID:&quot;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id_input</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Name:&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name_input</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Age:&quot;</span><span class="p">),</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">age_input</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Email:&quot;</span><span class="p">),</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">email_input</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        
        <span class="k">elif</span> <span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Course&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span> <span class="o">=</span> <span class="n">QLineEdit</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>  
            <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Course ID:&quot;</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Course Name:&quot;</span><span class="p">),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span> <span class="o">=</span> <span class="n">QPushButton</span><span class="p">(</span><span class="s2">&quot;Cancel&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">accept</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span><span class="o">.</span><span class="n">clicked</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reject</span><span class="p">)</span>

        <span class="n">button_layout</span> <span class="o">=</span> <span class="n">QHBoxLayout</span><span class="p">()</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ok_button</span><span class="p">)</span>
        <span class="n">button_layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cancel_button</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">addLayout</span><span class="p">(</span><span class="n">button_layout</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<div class="viewcode-block" id="EditDialog.get_inputs">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.EditDialog.get_inputs">[docs]</a>
    <span class="k">def</span> <span class="nf">get_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **Sphinx-style documentation**</span>
<span class="sd">        Retrieves the inputs entered in the dialog.</span>

<span class="sd">        :return: a tuple having name, age, and email for students or instructors, or the course name for courses.</span>
<span class="sd">        :rtype: tuple[str, str, str] or str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Student&quot;</span><span class="p">,</span> <span class="s2">&quot;Instructor&quot;</span><span class="p">]:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">age_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">email_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">record_type</span> <span class="o">==</span> <span class="s2">&quot;Course&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

        
<div class="viewcode-block" id="EditDialog.get_course_id">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.EditDialog.get_course_id">[docs]</a>
    <span class="k">def</span> <span class="nf">get_course_id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the course ID entered in the dialog.</span>

<span class="sd">        :return: The course ID.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_id_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="EditDialog.get_course_name">
<a class="viewcode-back" href="../modules.html#lab2_pyqt.EditDialog.get_course_name">[docs]</a>
    <span class="k">def</span> <span class="nf">get_course_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        **regular docstring** </span>
<span class="sd">        Retrieves the course name entered in the dialog.</span>

<span class="sd">        :return: The course name.</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">course_name_input</span><span class="o">.</span><span class="n">text</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>
</div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">init_db</span><span class="p">()</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">window</span> <span class="o">=</span> <span class="n">SchoolManagementSystem</span><span class="p">()</span>
    <span class="n">window</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Arman Nadjarian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>